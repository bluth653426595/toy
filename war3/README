本来是打算做一个War3局域网链接工具的
网上有流传的一个工具, 但只能看到本子局域网内部的主机, 其他网段的主机需要手动
添加.

其实完全可以实现自动添加, 只是做这个的时候刚到湖经上学, 而且学校当时的网
还算可以感觉做出来也没什么用就在完成功能性要求后没继续做了.

记得当时已经可以做到显示其他主机.

主要思路是通过Internet来保存各个节点的内网IP(以大局域网为一个类,比如一个学校)

然后登录的时候就能通过抓取到使用此工具的内网IP, 并且向这些IP报告自己的IP。
这样只需要在第一次登录的时候进行很少的数据通讯便能维护整个IP数据.

后面的事情就很简单了, 发送War的主机广播信息, 这里由于不能占用war3本身的端口
所以使用的raw socket进行监听和发送.
War3数据包格式网上已经有人分析了自己分析也不难,用wireshark之类的工具抓包分析
下.

保存IP数据的公网服务器我当时是使用的GAE不过源码我弄丢了, 又懒得翻墙去把数据抓
回来,主要是代码也比较简单随便用什么写都可以.

主要服务器实现了3个接口就行了如下

注册本机内网ip, 刚登录的时候
url(server + _("?action=reg&ip=") + ip + _("&zone=") + wxString()<<zone);

删除本机内网ip, 退出的时候
url(server + _("?action=del&ip=") + ip + _("&zone=") + wxString()<<zone);

获取当前域所有的内网ip地址, 登录时候
url(server + _("?action=download&zone=") + wxString()<<zone);

三个接口都带zone参数, 主要是用来区分大局域网的,一般一个学校一个zone就行.


不过如果直接不加修改就用我估计不能正常运行, 当时没用版本管理, 代码乱丢乱改,
记得最后好像改成问题就没继续做了.
